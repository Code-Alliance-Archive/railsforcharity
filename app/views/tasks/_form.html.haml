- @tags_array = Tag.find_all_by_tag_type('task').map(&:name).sort

:javascript
  $(document).ready(function() {
    $(".typeahead").tokenInput("/users.json", {
      minChars: 2,
      hintText: "Type name or username...",
      theme: "facebook",
      prePopulate: $(".typeahead").data("load"),
      preventDuplicates: true,
      resultsFormatter: function(item) {
        return "<li>" + "<img src='" + "/assets/avatar.png" + "' title='" + item.name + "' height='25px' width='25px' />" + "<div style='display: inline-block; padding-left: 10px;'><div class='name'>" + item.name + "</div></div></li>";
      }
    });
     $(".select_tags").select2({
      tags: #{@tags_array},
      tokenSeparators: [',', ' '],
      placeholder: "Select existing tags or add new ones...",
      width: '50%'
    });
  });

.span6
= simple_form_for [@project, @task] do |f|
  = f.error_notification

  .form-inputs
    = f.input :name, :label => 'Story Title', :input_html => { :style => 'width:50%' }
    = f.input :description, :as => 'text', :label => 'Story Description', :as => :ckeditor, :input_html => { :toolbar => 'Basic' }
    = f.input :tag_names, :input_html => { :class => 'select_tags', data: { load: @task.tags } }, :label => 'Add Tags'
    = f.input :hours, :label => 'Estimated Hours', :collection => 1..5, :include_blank => false
    = f.input :task_type, :collection => ['Feature', 'Bug', 'Chore', 'Release'], :include_blank => false


  .form-actions
    = f.button :submit, :class => 'btn btn-primary'